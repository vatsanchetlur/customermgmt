{"ast":null,"code":"// filepath: /Users/n0096336/Downloads/FullStack/capstone2/customer-management-app/src/services/customerService.js\nconst API_BASE_URL = 'http://localhost:3001/api';\nexport const getCustomers = async () => {\n  try {\n    console.log('Fetching customers from API...');\n    const response = await fetch(`${API_BASE_URL}/customers`);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    console.log('Fetched customers:', data);\n    return data;\n  } catch (error) {\n    console.error(\"Failed to fetch customers:\", error);\n    return []; // Return empty array on error\n  }\n};\nexport const addCustomer = async customer => {\n  try {\n    // Get current customers\n    const currentCustomers = await getCustomers();\n\n    // Generate a new ID (max + 1)\n    const nextId = currentCustomers.length > 0 ? Math.max(...currentCustomers.map(c => c.id)) + 1 : 1;\n\n    // Create new customer with ID\n    const newCustomer = {\n      id: nextId,\n      ...customer\n    };\n\n    // Add to list and save\n    const updatedCustomers = [...currentCustomers, newCustomer];\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedCustomers));\n    return newCustomer;\n  } catch (error) {\n    console.error(\"Failed to add customer:\", error);\n    throw error;\n  }\n};\nexport const updateCustomer = async (id, updatedData) => {\n  try {\n    const customers = await getCustomers();\n    const index = customers.findIndex(c => c.id === id);\n    if (index === -1) {\n      throw new Error(`Customer with ID ${id} not found`);\n    }\n\n    // Update the customer\n    const updatedCustomer = {\n      ...customers[index],\n      ...updatedData\n    };\n    customers[index] = updatedCustomer;\n\n    // Save to localStorage\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(customers));\n    return updatedCustomer;\n  } catch (error) {\n    console.error(`Failed to update customer ${id}:`, error);\n    throw error;\n  }\n};\nexport const deleteCustomer = async id => {\n  try {\n    const customers = await getCustomers();\n    const filteredCustomers = customers.filter(c => c.id !== id);\n    if (filteredCustomers.length === customers.length) {\n      throw new Error(`Customer with ID ${id} not found`);\n    }\n\n    // Save filtered list\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(filteredCustomers));\n    return {\n      message: 'Customer deleted successfully'\n    };\n  } catch (error) {\n    console.error(`Failed to delete customer ${id}:`, error);\n    throw error;\n  }\n};","map":{"version":3,"names":["API_BASE_URL","getCustomers","console","log","response","fetch","ok","Error","status","data","json","error","addCustomer","customer","currentCustomers","nextId","length","Math","max","map","c","id","newCustomer","updatedCustomers","localStorage","setItem","STORAGE_KEY","JSON","stringify","updateCustomer","updatedData","customers","index","findIndex","updatedCustomer","deleteCustomer","filteredCustomers","filter","message"],"sources":["/Users/n0096336/Downloads/FullStack/capstone2/customer-management-app/src/services/customerService.js"],"sourcesContent":["// filepath: /Users/n0096336/Downloads/FullStack/capstone2/customer-management-app/src/services/customerService.js\nconst API_BASE_URL = 'http://localhost:3001/api';\n\nexport const getCustomers = async () => {\n    try {\n        console.log('Fetching customers from API...');\n        const response = await fetch(`${API_BASE_URL}/customers`);\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log('Fetched customers:', data);\n        return data;\n    } catch (error) {\n        console.error(\"Failed to fetch customers:\", error);\n        return []; // Return empty array on error\n    }\n};\n\nexport const addCustomer = async (customer) => {\n    try {\n        // Get current customers\n        const currentCustomers = await getCustomers();\n        \n        // Generate a new ID (max + 1)\n        const nextId = currentCustomers.length > 0 \n            ? Math.max(...currentCustomers.map(c => c.id)) + 1 \n            : 1;\n        \n        // Create new customer with ID\n        const newCustomer = { \n            id: nextId,\n            ...customer \n        };\n        \n        // Add to list and save\n        const updatedCustomers = [...currentCustomers, newCustomer];\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedCustomers));\n        \n        return newCustomer;\n    } catch (error) {\n        console.error(\"Failed to add customer:\", error);\n        throw error;\n    }\n};\n\nexport const updateCustomer = async (id, updatedData) => {\n    try {\n        const customers = await getCustomers();\n        const index = customers.findIndex(c => c.id === id);\n        \n        if (index === -1) {\n            throw new Error(`Customer with ID ${id} not found`);\n        }\n        \n        // Update the customer\n        const updatedCustomer = { \n            ...customers[index], \n            ...updatedData \n        };\n        customers[index] = updatedCustomer;\n        \n        // Save to localStorage\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(customers));\n        \n        return updatedCustomer;\n    } catch (error) {\n        console.error(`Failed to update customer ${id}:`, error);\n        throw error;\n    }\n};\n\nexport const deleteCustomer = async (id) => {\n    try {\n        const customers = await getCustomers();\n        const filteredCustomers = customers.filter(c => c.id !== id);\n        \n        if (filteredCustomers.length === customers.length) {\n            throw new Error(`Customer with ID ${id} not found`);\n        }\n        \n        // Save filtered list\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(filteredCustomers));\n        \n        return { message: 'Customer deleted successfully' };\n    } catch (error) {\n        console.error(`Failed to delete customer ${id}:`, error);\n        throw error;\n    }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}